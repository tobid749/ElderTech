@model Eldertech.Models.Aplicacion
@{
    ViewData["Title"] = Model.Nombre;
    var preguntas = ViewBag.Preguntas as List<Eldertech.Models.PreguntaAplicacion>;
}
<header>
  <nav>
    <div class="nav-left">
      <a href='@Url.Action("Index", "Home")' aria-label="Inicio ElderTech" class="brand">
        <img src="/Imagenes/Logo.png" alt="Logo ElderTech" class="logo">
      </a>

      <form action='@Url.Action("Articulos", "Home")' method="get" class="search-form" role="search">
        <input type="search" name="q" placeholder="Buscar art√≠culos" aria-label="Buscar art√≠culos">
        <button type="submit" class="search-btn">üîç</button>
      </form>
    </div>

    <ul class="nav-links">
      <li><a href='@Url.Action("Articulos", "Home")'>Articulos</a></li>
      <li><a href='@Url.Action("Camino", "Home")'>Camino</a></li>
      <li><a href='@Url.Action("Aplicaciones", "Home")' style="background-color: #008D36;">Aplicaciones</a></li>
      <li><a href='@Url.Action("Foro", "Home")'>Foro</a></li>
      <li><a href='@Url.Action("Contacto", "Home")'>Contacto</a></li>
      <li><a href='@Url.Action("Ayuda", "Home")'>Necesito ayuda</a></li>
    </ul>
  </nav>
</header>
<section class="banner-eldertech">
    <h1 class="banner-title">@Model.Nombre</h1>
</section>

<main class="aplicacion-contenedor">

    <div class="aplicacion-content">

        <div class="aplicacion-img-container">
            <img src="@Model.Foto" alt="@Model.Nombre" class="aplicacion-img">
        </div>

        <div class="aplicacion-preguntas">
            <h2 class="preguntas-title">Preguntas</h2>

          @{
    var pregunta = ViewBag.PreguntaActual as Eldertech.Models.PreguntaAplicacion;
    var opciones = ViewBag.OpcionesMezcladas as List<(string text, int num)>;
}

@if (pregunta != null)
{
    <div class="pregunta" data-correcta="@pregunta.Correcta">
        <p class="pregunta-text">@pregunta.Enunciado</p>

        <div class="respuesta-grid">
            @foreach (var opc in opciones)
            {
                <button data-num="@opc.num">@opc.text</button>
            }
        </div>

       <form method="post" asp-action="Siguiente" asp-route-id="@Model.IDAplicacion" asp-route-next="@ViewBag.NextIndex">
    <button id="btnSiguiente" class="btn-siguiente" disabled>Siguiente ‚ûú</button>
</form>

    </div>
}

        </div>
    </div>

    <h2 class="articulos-title">Art√≠culos relacionados</h2>

    <div class="articulos-rel">
        <!-- Aqu√≠ luego integramos Art√≠culos desde DB -->
        <p style="color:#777; text-align:center;">Muy pronto disponibles ‚úÖ</p>
    </div>

</main>




<script>


document.querySelectorAll('.pregunta button[data-num]').forEach(btn=>{
    btn.addEventListener('click',()=>{
        const cont = btn.closest('.pregunta');
        const correcta = cont.dataset.correcta;
        cont.querySelectorAll('button[data-num]').forEach(b=>{
            b.disabled=true;
            if(b.dataset.num === correcta)
                b.classList.add('correcta');
            else
                b.classList.add('incorrecta');
        });

        document.getElementById("btnSiguiente").disabled = false;
    });
});


</script>
